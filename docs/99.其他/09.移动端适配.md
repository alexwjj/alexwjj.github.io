---
title: ç§»åŠ¨ç«¯é€‚é…
sidebar: auto
date: 2020-04-25 00:00:00
tags: 
  - ç§»åŠ¨ç«¯
categories: 
  - å‰ç«¯
permalink: /pages/c863681e7285f/
---

> æ”¶é›†çš„ä¸€äº›ä¼˜åŒ–æ–¹æ³•ï¼Œé¡¹ç›®ä¸­è¦å¤šå°è¯• ğŸ¤”ğŸ¤”ğŸ¤”


<!-- more --> 
ç›¸å¯¹äºPCç«¯æ¥è¯´ï¼Œç§»åŠ¨ç«¯è®¾å¤‡åˆ†è¾¨ç‡ç™¾èŠ±é½æ”¾ï¼Œåƒå¥‡ç™¾æ€ªï¼Œå¯¹äºæ¯ä¸€ä¸ªå¼€å‘è€…æ¥è¯´ï¼Œç§»åŠ¨ç«¯é€‚é…æ˜¯æˆ‘ä»¬è¿›è¡Œç§»åŠ¨ç«¯å¼€å‘ç¬¬ä¸€ä¸ªéœ€è¦é¢å¯¹çš„é—®é¢˜ã€‚

åœ¨ç§»åŠ¨ç«¯æˆ‘ä»¬ç»å¸¸å¯ä»¥åœ¨headæ ‡ç­¾ä¸­çœ‹åˆ°è¿™æ®µä»£ç ï¼š
```bash
<meta name='viewport' content='width=device-width,initial-scale=1,user-scale=no' />
```
metaçš„è®¾ç½®å…¶å®å°±æ˜¯å¯¹ç½‘é¡µçš„å®½åº¦å’Œæµè§ˆå™¨çª—å£çš„å®½åº¦è¿›è¡Œè®¾ç½®ã€‚
- width=device-widthè¡¨ç¤ºé¡µé¢å®½åº¦ä¸è®¾å¤‡è§†å£å®½åº¦ä¸€è‡´
- initial-scale=1è¡¨ç¤ºé¡µé¢å®½åº¦å’Œç½‘é¡µå®½åº¦ä¸è®¾å¤‡è§†å£å®½åº¦çš„åˆå§‹ç¼©æ”¾æ¯”ä¾‹
- user-scale=noç¦æ­¢ç¼©æ”¾

## remæ–¹æ¡ˆ
rem æ˜¯ç›¸å¯¹äºæ ¹å…ƒç´  html çš„ font-size æ¥åšè®¡ç®—ã€‚é€šå¸¸åœ¨é¡µé¢åˆå§‹åŒ–æ—¶åŠ è½½æ—¶é€šè¿‡å¯¹document.documentElement.style.fontSize è®¾ç½®æ¥å®ç°ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š
```javascript
;(function (doc, win) {
   let docEl = doc.documentElement;
   //è€ƒè™‘ä»¥åŠå…¼å®¹äº† å±å¹•æ—‹è½¬çš„äº‹ä»¶
   let resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize';
   let recalc = function () {
     var clientWidth = docEl.clientWidth;
     if (!clientWidth) return;
     if (clientWidth >= 750) {
       docEl.style.fontSize = '100px';
     } else {
       docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
     }
   };
   if (!doc.addEventListener) return;
   win.addEventListener(resizeEvt, recalc, false); // å±å¹•å¤§å°ä»¥åŠæ—‹è½¬å˜åŒ–è‡ªé€‚åº”
   doc.addEventListener('DOMContentLoaded', recalc, false); // é¡µé¢åˆæ¬¡æ‰“å¼€è‡ªé€‚åº”
   recalc();
})(document, window);
```
ä¸Šé¢ä»£ç ä¸­ï¼ŒclientWidthä¸º750ï¼ˆiphone6ï¼‰æ—¶ï¼Œ1rem=100pxã€‚ä¸€èˆ¬è®¾è®¡å›¾çš„å®½åº¦ä¸º750pxï¼ŒåŠ å…¥æµ‹é‡å°ºå¯¸ä¸º100pxï¼Œcssä»£ç ä¸­å¯ä»¥ç›´æ¥å†™1remã€‚

## 1pxè¾¹æ¡†
- å±å¹•çš„1pxï¼ˆæ¯ä¸ªç‰©ç†åƒç´ ï¼‰å’Œcssä¸­å†™çš„1pxä¹‹é—´æ˜¯æœ‰åŒºåˆ«çš„ï¼Œåœ¨æ™®é€šå±å¹•ä¸‹ï¼Œcssçš„1pxå¯¹åº”1ç‰©ç†åƒç´ ï¼Œåœ¨2å€å±ã€3å€å±ä¸‹1pxåˆ†åˆ«å¯¹åº”2ç‰©ç†åƒç´ ã€3ç‰©ç†åƒç´ ã€‚

- dpr(å±å¹•åƒç´ æ¯”ï¼Œå¯ä»¥ç†è§£ä¸ºæ¯pxç”¨å¤šå°‘ç‰©ç†åƒç´ æ˜¾ç¤º) = 2å°±æ˜¯2å€å±ã€‚åŒæ ·æ˜¯å®½ä¸º350pxçš„è®¾å¤‡ï¼Œæ™®é€šå±çœ‹èµ·æ¥æ­£å¸¸ï¼Œ2å€å±çœ‹èµ·æ¥çº¿æ¡å°±å¾ˆç²—ã€‚å¦‚æœéœ€è¦å…¨å±€éƒ½èƒ½ç”»å‡º1pxçš„çº¿å‘¢ï¼Ÿæˆ‘ä»¬åªè¦ä¿è¯è®©1pxå§‹ç»ˆåªå 1ä¸ªç‰©ç†åƒç´ å°±è¡Œäº†ã€‚é€šå¸¸é€šè¿‡æ”¹å˜metaæ ‡ç­¾çš„viewportçš„initial-scaleå€¼å®ç°ã€‚
- å¯¹äº2å€å±è®¾ç½®initial-scale=0.5ï¼Œå¯¹äº3å€å±è®¾ç½®initial-scale=0.33ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ç½‘é¡µæ¸²æŸ“å‰ç”¨è„šæœ¬é€šè¿‡window.devicePixelRatioè·å–dpr,ç„¶åå°†initial-scaleè®¾ç½®ä¸º 1/dprã€‚
  
```javascript
(function () {
  function resetViewPort() {
    var viewport = document.querySelector('meta[name = viewport]');
    if (!viewport) {
      viewport = document.createElement("meta");
      var head = document.querySelector("head");
      head.insertBefore(viewport, head.firstChild);
    }
    var ratio = window.devicePixelRatio || 1;
    var content = 'width=device-width,initial-scale=' + Math.round(100 / ratio) / 100 + ',maximum-scale=1,user-scalable=no';
    viewport.setAttribute("content", content);
  };
  window.addEventListener('DOMContentLoaded', resetViewPort);
})()
```
## pxè‡ªåŠ¨è½¬rem

## å®Œæ•´é…ç½®
```javascript
;(function (doc, win) {
  let docEl = doc.documentElement;
  //è€ƒè™‘ä»¥åŠå…¼å®¹äº† å±å¹•æ—‹è½¬çš„äº‹ä»¶
  let resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize';
  let recalc = function () {
    var clientWidth = docEl.clientWidth;
    if (!clientWidth) return;
    resetViewPort();
    if (clientWidth >= 750) {
      docEl.style.fontSize = '100px';
    } else {
      docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
    }
  };
  let resetViewPort = function () {
    var viewport = document.querySelector('meta[name = viewport]');
    if (!viewport) {
      viewport = document.createElement("meta");
      var head = document.querySelector("head");
      head.insertBefore(viewport, head.firstChild);
    }
    var ratio = window.devicePixelRatio || 1;
    var content = 'width=device-width,initial-scale=' + Math.round(100 / ratio) / 100 + ',maximum-scale=1,user-scalable=no';
    viewport.setAttribute("content", content);
  };
  if (!doc.addEventListener) return;
  win.addEventListener(resizeEvt, recalc, false); // å±å¹•å¤§å°ä»¥åŠæ—‹è½¬å˜åŒ–è‡ªé€‚åº”
  doc.addEventListener('DOMContentLoaded', recalc, false); // é¡µé¢åˆæ¬¡æ‰“å¼€è‡ªé€‚åº”
  recalc();
})(document, window);
```