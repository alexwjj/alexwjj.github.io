---
title: ã€Reactã€‘ä¸€å vueCoder æ€»ç»“çš„ React åŸºç¡€
sidebar: auto
sticky: true
tags:
  - React
categories:
  - å‰ç«¯æ¡†æ¶
permalink: /pages/38a448a32b1a5/
date: 2021-05-10 20:07:52
---
<p align="center">
  <img width="500" src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2d96f20fe5b94c52ae7224e2df821b2d~tplv-k3u1fbpfcp-watermark.image"/>
</p>

> ä¸€å vueCoder æ€»ç»“çš„ React åŸºç¡€

<!-- more -->
## èƒŒæ™¯

### 1ã€react ç³»åˆ—

å…ˆä»‹ç»ä¸‹èƒŒæ™¯ï¼Œå®ä¹ å¼€å§‹åˆ°`2021.3`æœˆä¸€ç›´åœ¨å†™`vue`ã€‚æ¢äº†`æ–°çª`åï¼Œä¸»è¦ç”¨ reactï¼Œå½“ç„¶ vue ä¹Ÿè¿˜ç”¨ï¼Œå H5 ç«¯ã€‚

ä»å…¥é—¨å¼€å§‹ï¼Œreact ç³»åˆ—çš„ï¼Œä¼šè¾¹å­¦è¾¹å†™ï¼Œä»åŸºç¡€ -> hooks -> æºç  -> é¢è¯•é¢˜ç­‰ç­‰ï¼Œä¹Ÿä¼šå†™ä¸€äº›è‡ªå·±è½¬å˜çš„è¿‡ç¨‹ã€‚

ç›¸å…³ä»£ç éƒ½ä¼šåœ¨ä¸‹é¢ ğŸ‘‡ğŸ» ä»“åº“ï¼Œæ±‚ä¸ª startã€‚

- [ä»“åº“ï¼š React-TypeScript ](https://github.com/alexwjj/React-TypeScript)
- [ çº¿ä¸Šé¢„è§ˆï¼šä¿ŠåŠ« React å­¦ä¹ ç³»ç»Ÿ](https://alexwjj.github.io/study)

### 2ã€ä¸ªäººåšå®¢
[é¦–å‘ä¸ªäººåšå®¢](https://alexwjj.github.io) , ä¸ªäººå­¦ä¹ çš„æ‰€æœ‰ç¬”è®°ï¼Œä»¥åŠå„ç§å‰ç«¯èµ„æºåˆ†äº«ï¼Œæœ‰å…´è¶£çš„è€å“¥å¯ä»¥çœ‹çœ‹ï¼Œé¡ºæ‰‹`start` ä¸€ä¸‹ä¸‹ã€‚
å¦‚æœä½ ä¹Ÿæƒ³æ­å»ºä¸€ä¸ªç±»ä¼¼çš„åšå®¢ï¼Œåšå®¢é‡Œé¢ä¹Ÿéƒ½æœ‰æ•™ç¨‹ï¼Œä»å¤´åˆ°å°¾å…¨å…è´¹ã€‚åšå®¢ä¸­æœ‰å…¬ä¼—å·ï¼Œæ¬¢è¿å„ä½ä¸€èµ·ï¼Œæ¯å¤©å­¦ä¹ æ‰“å¡ï¼Œå…±åŒè¿›æ­¥ï¼
![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b055c5fa4704d6da86a2824ce478c39~tplv-k3u1fbpfcp-watermark.image)
## ä¸€ã€ç”Ÿå‘½å‘¨æœŸ

[React ç”Ÿå‘½å‘¨æœŸå›¾è§£](https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/)

æˆ‘å·²ç»æŠŠè¿™å¼ å›¾å°åœ¨è„‘å­é‡Œé¢äº†ï¼Œæ²¡äº‹å°±è‡ªå·±ç”»ç”»ï¼Œä¸­é—´å‘æ•£ä¸€äº›è‡ªå·±çš„æ€è€ƒã€‚u1s1ï¼Œä¸çŸ¥é“ react çš„ç”Ÿå‘½å‘¨æœŸå‘½åä¸ºä»€ä¹ˆè¦æ€ä¹ˆé•¿~~~ï¼Œ
å°ç¨‹åºï¼Œvue çš„éƒ½æ¯”è¾ƒçŸ­ã€‚æ¯•ç«Ÿä½¿ç”¨çš„é¢‘ç‡è¿˜æ˜¯å¾ˆé«˜çš„ï¼ŒHooks é™¤å¤–ã€‚

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/135869e8f4724a92986dd61790774664~tplv-k3u1fbpfcp-watermark.image)

### 1ã€constructor

constructor æ˜¯ç±»é€šç”¨çš„æ„é€ å‡½æ•°ï¼Œå¸¸ç”¨äºåˆå§‹åŒ–ï¼Œç®—æ˜¯ç”Ÿå‘½å‘¨æœŸçš„ä¸€ç¯ã€‚React åæ¥çš„ç‰ˆæœ¬ä¸­ç±»ç»„ä»¶ä¹Ÿå¯ä»¥ä¸å†™ã€‚

æ³¨æ„ï¼šåœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨æ—¶ï¼Œ`super` å…³é”®å­—å°†å•ç‹¬å‡ºç°ï¼Œå¹¶ä¸”`å¿…é¡»`åœ¨ä½¿ç”¨ `this` å…³é”®å­—ä¹‹å‰ä½¿ç”¨ã€‚super å…³é”®å­—ä¹Ÿå¯ä»¥ç”¨æ¥è°ƒç”¨çˆ¶å¯¹è±¡ä¸Šçš„å‡½æ•°ã€‚[MDN è¯´æ˜](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/super#%E6%8F%8F%E8%BF%B0)

```js
class JJTest extends React.Component {
  // constructor å†™æ³•
  constructor(props) {
    super(props);
    this.state = {
      count: 0,
    };
    this.handleClick = this.handleClick.bind(this);
  }
  // ç›´æ¥å£°æ˜
  state = {
    count: 0,
  };
}
```

### 2ã€getDerivedStateFromProps

è§¦å‘æ—¶æœºï¼š`state å˜åŒ–ã€props å˜åŒ–ã€forceUpdate`ï¼Œå¦‚ä¸Šå›¾ã€‚

è¿™æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•, æ˜¯ä¸€ä¸ªå’Œç»„ä»¶è‡ªèº«"ä¸ç›¸å…³"çš„è§’è‰². åœ¨è¿™ä¸ªé™æ€æ–¹æ³•ä¸­, é™¤äº†ä¸¤ä¸ªé»˜è®¤çš„ä½ç½®å‚æ•° nextProps å’Œ currentState ä»¥å¤–, ä½ `æ— æ³•è®¿é—®`ä»»ä½•ç»„ä»¶ä¸Šçš„æ•°æ®ã€‚

```js
// åˆå§‹åŒ–/æ›´æ–°æ—¶è°ƒç”¨
static getDerivedStateFromProps(nextProps, currentState) {
  console.log(nextProps, currentState, "getDerivedStateFromPropsæ–¹æ³•æ‰§è¡Œ");
  // è¿”å›å€¼æ˜¯å¯¹currentStateè¿›è¡Œä¿®æ”¹
  return {
    fatherText: nextProps.text,
  };
}
```

### 3ã€render

render å‡½æ•°è¿”å›çš„ JSX ç»“æ„ï¼Œç”¨äºæè¿°å…·ä½“çš„æ¸²æŸ“å†…å®¹ï¼Œ
render è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥ this.props å’Œ this.state çš„å˜åŒ–å¹¶è¿”å›ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š

- `React å…ƒç´ `ã€‚é€šå¸¸é€šè¿‡ JSX åˆ›å»ºã€‚ä¾‹å¦‚ï¼Œ<div /> ä¼šè¢« React æ¸²æŸ“ä¸º DOM èŠ‚ç‚¹ï¼Œ<MyComponent /> ä¼šè¢« React æ¸²æŸ“ä¸ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œæ— è®ºæ˜¯ <div /> è¿˜æ˜¯ <MyComponent /> å‡ä¸º React å…ƒç´ ã€‚
- `æ•°ç»„æˆ– fragments`ã€‚ ä½¿å¾— render æ–¹æ³•å¯ä»¥è¿”å›å¤šä¸ªå…ƒç´ ã€‚æ¬²äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… fragments æ–‡æ¡£ã€‚
- `Portals`ã€‚å¯ä»¥æ¸²æŸ“å­èŠ‚ç‚¹åˆ°ä¸åŒçš„ DOM å­æ ‘ä¸­ã€‚æ¬²äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æœ‰å…³ portals çš„æ–‡æ¡£
- `å­—ç¬¦ä¸²æˆ–æ•°å€¼ç±»å‹`ã€‚å®ƒä»¬åœ¨ DOM ä¸­ä¼šè¢«æ¸²æŸ“ä¸ºæ–‡æœ¬èŠ‚ç‚¹
- `å¸ƒå°”ç±»å‹æˆ– null`ã€‚ä»€ä¹ˆéƒ½ä¸æ¸²æŸ“ã€‚ï¼ˆä¸»è¦ç”¨äºæ”¯æŒè¿”å› test && <Child /> çš„æ¨¡å¼ï¼Œå…¶ä¸­ test ä¸ºå¸ƒå°”ç±»å‹ã€‚)

æ³¨æ„ï¼šå¦‚æœ shouldComponentUpdate() è¿”å› falseï¼Œåˆ™ä¸ä¼šè°ƒç”¨ render()ã€‚

Hooks ä¸éœ€è¦å†™ render å‡½æ•°ã€‚è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå³ä½¿ Hooks ä¸éœ€è¦å†™ renderï¼Œ
æ²¡æœ‰ç”¨åˆ° React.xxxï¼Œç»„ä»¶å†…è¿˜æ˜¯è¦`import React from "react";`çš„ï¼ˆè‡³äºåŸå› ï¼Œåç»­æ·±å…¥ Hooks å­¦ä¸€ä¸‹ï¼Œå¤§å“¥ä»¬ä¹Ÿå¯ä»¥è§£é‡Šä¸‹ï¼‰ã€‚React å®˜æ–¹ä¹Ÿè¯´äº†ï¼Œåç»­çš„ç‰ˆæœ¬ä¼šä¼˜åŒ–æ‰è¿™ä¸€ç‚¹ã€‚

### 4ã€componentDidMount

ä¸»è¦ç”¨äºç»„ä»¶åŠ è½½å®Œæˆæ—¶åšæŸäº›æ“ä½œï¼Œæ¯”å¦‚å‘èµ·ç½‘ç»œè¯·æ±‚æˆ–è€…ç»‘å®šäº‹ä»¶ã€‚å½“åš vue çš„ mounted ç”¨å°±è¡Œäº†ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š

componentDidMount() é‡Œç›´æ¥è°ƒç”¨ setState()ã€‚å®ƒå°†è§¦å‘é¢å¤–æ¸²æŸ“,ä¹Ÿå°±æ˜¯ä¸¤æ¬¡ renderï¼Œä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œä¸»è¦è¿˜æ˜¯ç†è§£ã€‚

### 5ã€shouldComponentUpdate

è¯¥æ–¹æ³•é€šè¿‡è¿”å› `true` æˆ–è€… `false` æ¥ç¡®å®šæ˜¯å¦éœ€è¦è§¦å‘æ–°çš„æ¸²æŸ“ã€‚å› ä¸ºæ¸²æŸ“è§¦å‘æœ€åä¸€é“å…³å¡ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯`æ€§èƒ½ä¼˜åŒ–`çš„å¿…äº‰ä¹‹åœ°ã€‚é€šè¿‡æ·»åŠ åˆ¤æ–­æ¡ä»¶æ¥é˜»æ­¢ä¸å¿…è¦çš„æ¸²æŸ“ã€‚ æ³¨æ„ï¼š`é¦–æ¬¡æ¸²æŸ“`æˆ–ä½¿ç”¨ `forceUpdate()` æ—¶ä¸ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚

React å®˜æ–¹æä¾›äº†ä¸€ä¸ªé€šç”¨çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯ `PureComponent`ã€‚PureComponent çš„æ ¸å¿ƒåŸç†å°±æ˜¯é»˜è®¤å®ç°äº† shouldComponentUpdate å‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­å¯¹ props å’Œ state è¿›è¡Œ`æµ…æ¯”è¾ƒ`ï¼Œç”¨æ¥åˆ¤æ–­æ˜¯å¦è§¦å‘æ›´æ–°ã€‚

å½“ç„¶ PureComponent ä¹Ÿæ˜¯æœ‰`ç¼ºç‚¹`çš„ï¼Œä½¿ç”¨çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„ï¼šç”±äºè¿›è¡Œçš„æ˜¯æµ…æ¯”è¾ƒï¼Œå¯èƒ½ç”±äºæ·±å±‚çš„æ•°æ®ä¸ä¸€è‡´å¯¼è‡´è€Œäº§ç”Ÿé”™è¯¯çš„å¦å®šåˆ¤æ–­ï¼Œä»è€Œå¯¼è‡´é¡µ é¢`å¾—ä¸åˆ°æ›´æ–°`ã€‚ä¸é€‚åˆä½¿ç”¨åœ¨å«æœ‰`å¤šå±‚åµŒå¥—å¯¹è±¡`çš„ state å’Œ prop ä¸­ã€‚

```js
shouldComponentUpdate(nextProps, nextState) {
  // æµ…æ¯”è¾ƒä»…æ¯”è¾ƒå€¼ä¸å¼•ç”¨ï¼Œå¹¶ä¸ä¼šå¯¹ Object ä¸­çš„æ¯ä¸€é¡¹å€¼è¿›è¡Œæ¯”è¾ƒ
  if (shadowEqual(nextProps, this.props) || shadowEqual(nextState, this.state) ) {
    return true
  }
  return false
}
```

### 6ã€getSnapshotBeforeUpdate

åœ¨ DOM `æ›´æ–°å‰`è¢«è°ƒç”¨ï¼Œè¿”å›å€¼å°†ä½œä¸º componentDidUpdate çš„ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚

```js
getSnapshotBeforeUpdate(prevProps, prevState) {
    console.log("getSnapshotBeforeUpdateæ–¹æ³•æ‰§è¡Œ");

    return "componentDidUpdatedçš„ç¬¬ä¸‰ä¸ªå‚æ•°";
}
```

### 7ã€componentDidUpdate

é¦–æ¬¡æ¸²æŸ“ä¸ä¼šæ‰§è¡Œæ­¤æ–¹æ³•ã€‚å¯ä»¥ä½¿ç”¨ setStateï¼Œä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œä½†ä¸€å®šè¦å°å¿ƒä½¿ç”¨ï¼Œé¿å…æ­»å¾ªç¯

```js
 componentDidUpdate(preProps, preState, valueFromSnapshot) {
    console.log("componentDidUpdateæ–¹æ³•æ‰§è¡Œ");

    console.log("ä» getSnapshotBeforeUpdate è·å–åˆ°çš„å€¼æ˜¯", valueFromSnapshot);
  }
```

### 8ã€componentWillUnmount

ä¸»è¦ç”¨äºä¸€äº›äº‹ä»¶çš„è§£ç»‘ï¼Œèµ„æºæ¸…ç†ç­‰ï¼Œæ¯”å¦‚å–æ¶ˆå®šæ—¶å™¨ï¼Œå–æ¶ˆè®¢é˜…äº‹ä»¶

### å°ç»“

ç”Ÿå‘½å‘¨æœŸä¸€å®šè¦å¥½å¥½ç†è§£ï¼Œä¸€å®šè¦åŠ¨æ‰‹å†™ï¼Œçœ‹ä¸€ä¸‹æ¯ç§æƒ…å†µä¸‹ï¼Œç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œç»“æœã€‚ä¸Šè¿°ä»£ç ä¸­åœ¨[React-TypeScript ä»“åº“](https://github.com/alexwjj/React-TypeScript)ä¸­éƒ½æœ‰ï¼Œå¯ä»¥ clone ä¸‹æ¥è·‘è·‘çœ‹ï¼Œæˆ–è€…ç›´æ¥è®¿é—®[ä¿ŠåŠ«å­¦ä¹ ç³»ç»Ÿ LifeCycle](https://alexwjj.github.io/study/#/demo)ã€‚è¿˜æœ‰äº›å…¶ä»–çš„ç”Ÿå‘½å‘¨æœŸï¼Œ`componentDidCatch, UNSAFE_componentWillMount()`ç­‰ç­‰ï¼Œç®€å•äº†è§£ä¸‹å°±è¡Œã€‚

## äºŒã€JSX

### 1ã€å¾ªç¯åˆ—è¡¨

jsx ä¸­ä¸€èˆ¬ç”¨ map æ¥æ¸²æŸ“åˆ—è¡¨å¾ªç¯ç±»çš„ï¼Œvue ä¸­ç›´æ¥åœ¨ template ä¸­å†™ v-for å³å¯

```js
{
  list.map((item, index) => {
    return <AppCard key={index} title={item.title} onClick={item.onClick} />;
  });
}
```

### 2ã€æ ·å¼

#### (1)className

å•ç‹¬å†™ä¸€ä¸ª class æ˜¯å¯ä»¥çš„ï¼ŒåŠ¨æ€æ‹¼æ¥éœ€è¦å€ŸåŠ© [classnames](https://github.com/JedWatson/classnames) åº“

```js
import style from './style.css'

<div className={style.class1 style.class2}</div>
```

#### (2)style

éœ€è¦æ³¨æ„çš„ï¼šä¸¤ä¸ªæ‹¬å·ï¼ˆæ ·å¼è¢«å½“åšä¸€ä¸ªå¯¹è±¡æ¥è§£æï¼‰ï¼Œç±»ä¼¼-è¿æ¥çš„æ ·å¼å±æ€§éœ€è¦è½¬æ¢æˆå°é©¼å³°å†™æ³•ã€‚

```js
<div style={{ marginTop: 8 }}>æ ·å¼</div>
```

#### (3)css éš”ç¦»

u1s1ï¼Œcss éš”ç¦»è¿™å—è¿˜æ˜¯ vue çš„ scoped å¥½ç”¨

- css-module

  create-react-app ä¸­å†…ç½®äº†ä½¿ç”¨ CSS Modules çš„é…ç½®ï¼Œå’Œ vue çš„ scoped åŸç†ç›¸ä¼¼ï¼Œéƒ½æ˜¯åœ¨ç”Ÿæˆçš„ class åé¢åŠ äº† hash å€¼

```js
// style.module.css
.text {
    color: blue
}
// app.tsx
import styles from "./style.module.css";
class App extends Component {
  render() {
    return <div className={styles.text}>css-module text</div>;
  }
}
// ç¼–è¯‘å
.text_3FI3s6uz {
    color: blue;
}
```

- styled-components

  ç›®å‰ç¤¾åŒºé‡Œæœ€å—æ¬¢è¿çš„ä¸€æ¬¾ `CSS in JS` æ–¹æ¡ˆï¼Œä¸ªäººæ„Ÿè§‰æœ‰ç‚¹åˆ«æ‰­ï¼Œä¸å¤ªå–œæ¬¢

```js
//å¼•å…¥styled-components
import styled from "styled-components";

//ä¿®æ”¹äº†divçš„æ ·å¼
const Title = styled.div`
  font-size: 30px;
  color: red;
`;
class App extends Component {
  render() {
    return (
      <>
        <Title>CSS in JS æ–¹æ¡ˆ</Title>
      </>
    );
  }
}
```

### 3ã€ä¸€ä¸ª JSX

åˆšå¼€å§‹ä» vue è½¬è¿‡æ¥ä¼šæœ‰äº›ä¸é€‚åº”ï¼ˆè¯è¯´æœ‰å¤šå°‘äººç›´æ¥åœ¨ vue é‡Œé¢å†™ JSX çš„ï¼‰ï¼Œä¹‹å‰ç”¨çš„éƒ½æ˜¯ Vue Sfc å†™æ³•ï¼Œå½“ç„¶å¤šå†™å†™å°±ç†Ÿæ‚‰äº†ã€‚
è‡³äº React é‡‡ç”¨ JSX çš„ä¼˜åŠ£åŠ¿ï¼Œè¯„è®ºåŒºå„æŠ’å·±è§å“ˆã€‚

[ä»£ç å¯¹åº”é¡µé¢é¢„è§ˆ](https://alexwjj.github.io/study/#/demo)

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c383415965c64f17ac444d74c79ed527~tplv-k3u1fbpfcp-watermark.image)
```js
render() {
    return (
      <>
        <Alert title="æ§åˆ¶å°å±•ç¤ºçˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„è¿‡ç¨‹" />
        <div className="fatherContainer">
          <Button onClick={this.changeText} type="primary">
            ä¿®æ”¹çˆ¶ç»„ä»¶æ–‡æœ¬å†…å®¹
          </Button>
          <Button onClick={this.hideChild} type="danger">
            {this.state.hideChild ? "æ˜¾ç¤º" : "éšè—"}å­ç»„ä»¶
          </Button>
          {this.state.hideChild ? null : (
            <LifeCycle text={this.state.text} count={1} />
          )}
        </div>
        <div>
          <BlockLoading loading={this.state.loading} iconSize={64} />
          <iframe
            src={this.state.lifeCycle}
            title="navigation"
            width="100%"
            height="600px"
            onLoad={this.onLoading}
            onError={this.onLoading}
          ></iframe>
        </div>
      </>
    );
  }
```

## ä¸‰ã€åŸºç¡€ç»„ä»¶

ç»„ä»¶è¿™å—ï¼Œä¸ªäººæ„Ÿè§‰å’Œ vue å·®åˆ«è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œé¢—ç²’åº¦æ›´ç»†è‡´ï¼Œå½“ç„¶ä¹Ÿå¢åŠ äº†ä¸€å®šéš¾åº¦ã€‚è¿™é‡Œå°±ç®€å•ä¾‹ä¸¾ä¸€ä¸ªTSç‰ˆæœ¬çš„ï¼Œ`å¸¦ Icon çš„æ ‡é¢˜ç»„ä»¶`

```js
import cn from "classnames";
import React from "react";
import "./style/index.less";
import { Icon,IIconProps } from "zent";

interface IProps {
  title: string;
  iconType?: IIconProps['type'];
  isShowIcon?: boolean;
  iconClassName?: string;
  titleClassName?: string;
}

export const ContentTitle: React.FC<IProps> = (props) => {
  const { title, iconType = 'youzan', isShowIcon = false , iconClassName, titleClassName, ...popProps } = props;

  return (
    <div className={cn("content-title", titleClassName)}>
      {title}
      {isShowIcon && <Icon
        className={cn("content-title__icon", iconClassName)}
        {...popProps}
        type={iconType}
      />}
    </div>
  );
};

export default ContentTitle;

```

## å››ã€é«˜é˜¶ç»„ä»¶ HOC

### 1ã€å«ä¹‰

å’Œ `vue mixins` ç›¸åŒï¼Œéƒ½æ˜¯ä¸ºäº†è§£å†³`ä»£ç å¤ç”¨`çš„é—®é¢˜ï¼Œä½† react ä¸­å·²ç»åºŸå¼ƒ mixinsï¼Œvue ä¸­ä¹Ÿä¸æ¨èä½¿ç”¨ã€‚
ä¸»è¦æ˜¯ä¼šå¸¦æ¥`å‘½åå†²çªï¼Œç›¸äº’ä¾èµ–ï¼Œä¸æ–¹ä¾¿ç»´æŠ¤`ç­‰ä¸€äº›ç¼ºç‚¹ã€‚

é«˜é˜¶ç»„ä»¶å…¶å®å°±æ˜¯å¤„ç† react ç»„ä»¶çš„`å‡½æ•°`ï¼Œç®€å•ç†è§£å°±æ˜¯å’Œ ES6 ä¸­æä¾›çš„ export/import ä½œç”¨ç›¸ä¼¼ï¼Œä¸åŒç‚¹åœ¨äºï¼š
é«˜é˜¶ç»„ä»¶ä¼šè¿›è¡Œ`åŠ å·¥å`å†å¯¼å‡ºä½ éœ€è¦çš„ä¸œè¥¿ã€‚ç±»ä¼¼äºæ–¹ç¨‹å¼ï¼š`y = ax + b`ï¼Œ x æ˜¯å…¥å£ï¼ˆç»„ä»¶ï¼‰ï¼Œä¼šæ ¹æ® a å’Œ b è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°æœ€ç»ˆçš„ yï¼ˆå¤„ç†åçš„ç»„ä»¶ï¼‰ ç»™åˆ°ä½ ç”¨ã€‚

### 2ã€Demo

å®˜ç½‘çš„å®ç° Demo: [é«˜é˜¶ç»„ä»¶](https://zh-hans.reactjs.org/docs/higher-order-components.html)

ä¸€ä¸ªç®€å•çš„é«˜é˜¶ç»„ä»¶(å®ç°æœ‰ä¸¤ç§æ–¹å¼ï¼šå±æ€§ä»£ç†å’Œåå‘ç»§æ‰¿)ï¼š

```js
// å±æ€§ä»£ç†: ç»„ä»¶å±æ€§çš„ä¸€äº›ä¿®æ”¹
const JJHOC = (WrappedComponent) => {
  return class NewComponent extends React.Component {
    render() {
      const newProps = { type: "HOC" };
      return <WrappedComponent {...this.props} {...newProps} />;
    }
  };
};
// åå‘ç»§æ‰¿: åœ¨render() æ–¹æ³•ä¸­è¿”å› super.render() æ–¹æ³•
const JJHOC = (WrappedComponent) => {
  return class NewComponent extends WrappedComponent {
    render() {
      return super.render();
    }
  };
};
```

### 3ã€å¸¸ç”¨ HOC

- react-router withRouter: å¯è·å– historyï¼Œä¸€äº›è·¯ç”±ä¿¡æ¯
- redux connect è¿æ¥ React ç»„ä»¶ä¸ Redux storeï¼Œç»™ç»„ä»¶æŒ‚è½½ dispatch æ–¹æ³•ã€‚

## äº”ã€ç»„ä»¶é€šä¿¡

### 1ã€props

å’Œ vue ä¸åŒçš„æ˜¯ï¼Œreact props ä¼ å€¼å¯ä»¥`ç›´æ¥å†™`ï¼Œä¸éœ€è¦å£°æ˜ã€‚åœ¨ props ä¸ŠæŒ‚è½½ `function`ï¼Œå°±ç›¸å½“äºæ˜¯ vue çš„`$emit`ã€‚
åŒæ ·éœ€è¦æ³¨æ„çš„æ˜¯å­ç»„ä»¶ä¸å¯ä»¥`ä¿®æ”¹ props` çš„å€¼

```js
import React from "react";

function Child(props) {
  const sendMsg = (msg) => {
    props.onClick("å­ç»„ä»¶çš„æ¶ˆæ¯");
  };
  return (
    <div>
      <div>å­ç»„ä»¶æ ‡é¢˜ï¼š{props.title}</div>
      <button onClick={() => sendMsg("å­ç»„ä»¶æ¶ˆæ¯")}> å­ä¼ çˆ¶ </button>
    </div>
  );
}

function Father() {
  const onClick = (msg) => {
    console.log(`çˆ¶ç»„ä»¶æ¥æ”¶ï¼š${msg}`);
  };
  return (
    <div>
      <Child title="ç»„ä»¶propsä¼ å€¼æµ‹è¯•" onClick={onClick}></Child>
    </div>
  );
}

export default Father;
```

### 2ã€context

[React Context å®˜ç½‘è¯´æ˜](https://zh-hans.reactjs.org/docs/context.html)ï¼Œè·¨ç»„ä»¶ä¼ å€¼ã€‚åˆ›å»ºäº†ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼ŒåŒ context å†…çš„ç»„ä»¶éƒ½å¯ä»¥
é€šè¿‡ Provider é…åˆ value ä½¿ç”¨æ•°æ®

```js
import * as React from "react";
import { Button } from "zent";
// Context å¯ä»¥è®©æˆ‘ä»¬æ— é¡»æ˜ç¡®åœ°ä¼ éæ¯ä¸€ä¸ªç»„ä»¶ï¼Œå°±èƒ½å°†å€¼æ·±å…¥ä¼ é€’è¿›ç»„ä»¶æ ‘ã€‚
// ä¸ºå½“å‰çš„ theme åˆ›å»ºä¸€ä¸ª contextï¼ˆâ€œprimaryâ€ä¸ºé»˜è®¤å€¼ï¼‰ã€‚
const ThemeContext = React.createContext("primary");
export default class App extends React.Component {
  render() {
    // ä½¿ç”¨ä¸€ä¸ª Provider æ¥å°†å½“å‰çš„ theme ä¼ é€’ç»™ä»¥ä¸‹çš„ç»„ä»¶æ ‘ã€‚
    // æ— è®ºå¤šæ·±ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è¯»å–è¿™ä¸ªå€¼ã€‚
    // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°† danger ä½œä¸ºå½“å‰çš„å€¼ä¼ é€’ä¸‹å»ã€‚
    return (
      <ThemeContext.Provider value="danger">
        <Toolbar />
      </ThemeContext.Provider>
    );
  }
}

// ä¸­é—´çš„ç»„ä»¶å†ä¹Ÿä¸å¿…æŒ‡æ˜å¾€ä¸‹ä¼ é€’ theme äº†ã€‚
function Toolbar() {
  return (
    <div>
      <ThemedButton />
    </div>
  );
}

class ThemedButton extends React.Component {
  // æŒ‡å®š contextType è¯»å–å½“å‰çš„ theme contextã€‚
  // React ä¼šå¾€ä¸Šæ‰¾åˆ°æœ€è¿‘çš„ theme Providerï¼Œç„¶åä½¿ç”¨å®ƒçš„å€¼ã€‚
  // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“å‰çš„ theme å€¼ä¸º â€œdangerâ€ã€‚
  static contextType = ThemeContext;
  render() {
    return <Button type={this.context}>contextæµ‹è¯•</Button>;
  }
}
```

### 3ã€Redux

[Redux ä¸­æ–‡æ–‡æ¡£](http://cn.redux.js.org/)

redux çš„ä¸‰å¤§æ ¸å¿ƒï¼š

- actionï¼šaction å¯ä»¥è¯´æ˜¯ä¸€ä¸ªåŠ¨ä½œï¼Œç”¨æ¥æè¿°å°†è¦è§¦å‘çš„äº‹ä»¶ã€‚
- stateï¼šå•ä¸€æ•°æ®æºï¼Œç”¨æ¥å­˜å‚¨æˆ‘ä»¬çš„æ•°æ®ã€‚
- reducerï¼šé€šè¿‡è§¦å‘çš„ action äº‹ä»¶æ¥æ”¹å˜ state çš„å€¼ã€‚

ä¸ä¸€å®šéè¦ç”¨ï¼Œå¾ˆå¤šé¡¹ç›® context å°±å·²ç»å¤Ÿç”¨äº†

#### ï¼ˆ1ï¼‰æŒ‚è½½

ä½¿ç”¨ `createStore` åˆ›å»ºä¸€ä¸ª store å¹¶é€šè¿‡ `Provider` æŠŠå®ƒæ”¾åˆ°å®¹å™¨ç»„ä»¶ä¸­

```js
// index.js
const store = createStore(appReducer);

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById("root");
);

```

#### ï¼ˆ2ï¼‰åˆ›å»ºä¿®æ”¹çš„æ–¹æ³•

å’Œ vuex ç›¸ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡ `action` æ¥ä¿®æ”¹æ•°æ®

```js
// action.js
export const addConst = (payload) => {
  type: "ADD_CONST",
}

export const minusConst = (payload) => {
 type: "MINUS_CONST",
}
```

#### ï¼ˆ3ï¼‰åˆ›å»ºä¸€ä¸ª store é›†åˆ

å½“ dispatch è§¦å‘ç›¸åº”çš„æ–¹æ³•ï¼Œæ‰§è¡Œå¯¹åº”çš„æ“ä½œï¼Œä¿®æ”¹ store æ•°æ®ã€‚

```js
// appReducer.js
const initialState = { count: 0 };
const reducer = (state = initialState, action) => {
  switch (action.type) {
    case "ADD_CONST":
      return { count: count + 1 };
    case "MINUS_CONST":
      return { count: count - 1 };
    default:
      return state;
  }
};
export default reducer;
```

#### ï¼ˆ4ï¼‰ç»„ä»¶ä¸­ redux ä½¿ç”¨å§¿åŠ¿

```js
import React from "react";
import { connect } from "react-redux";

const ReduxDemo: React.FC = (props) => {
  const addCount = () => {
    const { dispatch } = props;
    dispatch({
      type: "ADD_CONST",
    });
  };

  const minusCount = () => {
    const { dispatch } = props;
    dispatch({
      type: "MINUS_CONST",
    });
  };
  return (
    <div>
      <button onClick={addCount}>åŠ </button>
      <button onClick={minusCount}>å‡</button>
      <div>{props.state}</div>
    </div>
  );
};

const mapStateToProps = (state) => {
  return {
    count: state.count,
  };
};
export default connect(mapStateToProps)(ReduxDemo);
```

## å…­ã€ç»„ä»¶æ ¡éªŒ

[React å®˜ç½‘ ä½¿ç”¨ PropTypes è¿›è¡Œç±»å‹æ£€æŸ¥](https://zh-hans.reactjs.org/docs/typechecking-with-proptypes.html)
react props ä¸æ˜¯å¿…é¡»å£°æ˜çš„ï¼Œä½†æ˜¯å¦‚æœé¡¹ç›®è§„èŒƒèµ·æ¥ï¼Œå°±éœ€è¦åœ¨ propTypes ä¸­å£°æ˜ props ç±»å‹ï¼Œæ³¨æ„éœ€è¦å¼•å…¥`prop-types`åº“

ä¸è¿‡ç°åœ¨æ›´å¤šçš„æ˜¯é€šè¿‡ `typescript` æ¥æ ¡éªŒç±»å‹äº†ï¼Œå¼€å‘é˜¶æ®µå°±èƒ½å‘ç°é—®é¢˜ã€‚

```js
import * as React from "react";
import PropTypes from "prop-types";

interface IProps {
  name: string;
}

const PropsDemo: React.FC<IProps> = ({ name }) => {
  return <h1>Hello, {name}</h1>;
};

PropsDemo.propTypes = {
  name: PropTypes.string,
};
```

## ä¸ƒã€React Router

- [React Router å®˜ç½‘](https://reactrouter.com/web/guides/quick-start) è‹±æ–‡ç‰ˆ
- [React Router ä¸­æ–‡æ–‡æ¡£](http://react-guide.github.io/react-router-cn/) æ„Ÿè§‰å†™çš„ä¸æ˜¯å¾ˆæ¸…æ¥š

### 1ã€æ³¨æ„

- react-router: å®ç°äº†è·¯ç”±çš„æ ¸å¿ƒåŠŸèƒ½, react-router 3.x  ç‰ˆæœ¬è¿˜åŒ…æ‹¬æ“ä½œ dom çš„æ–¹æ³•,4.x ä»¥ä¸Šå°±æ²¡æœ‰äº†ã€‚
- react-router-dom: åŸºäº react-routerï¼ŒåŠ å…¥äº†åœ¨æµè§ˆå™¨è¿è¡Œç¯å¢ƒä¸‹çš„ä¸€äº›åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼šLink ç»„ä»¶ï¼Œä¼šæ¸²æŸ“ä¸€ä¸ª a æ ‡ç­¾ï¼ŒLink ç»„ä»¶æºç  a æ ‡ç­¾è¡Œ; BrowserRouter å’Œ HashRouter ç»„ä»¶ï¼Œå‰è€…ä½¿ç”¨ pushState å’Œ popState äº‹ä»¶æ„å»ºè·¯ç”±ï¼Œåè€…ä½¿ç”¨ window.location.hash å’Œ hashchange äº‹ä»¶æ„å»ºè·¯ç”±ã€‚
- react-router-native: åŸºäº react-routerï¼Œç±»ä¼¼ react-router-domï¼ŒåŠ å…¥äº† react-native è¿è¡Œç¯å¢ƒä¸‹çš„ä¸€äº›åŠŸèƒ½

### 2ã€ä¸€ä¸ª Demo

```js
import React, { Component } from "react";
import Admin from "./pages/admin/admin";
import Login from "./pages/login/Login";
import { HashRouter, Route, Switch } from "react-router-dom";
class App extends Component {
  render() {
    return (
      <HashRouter>
        <Switch>
          <Route path="/" component={Admin}></Route>
          <Route path="/login" component={Login}></Route>
        </Switch>
      </HashRouter>
    );
  }
}

export default App;
```

### 3ã€è·¯ç”±ä¼ å‚

#### ï¼ˆ1ï¼‰params

```js
// router
<Route path='/path/:id' component={Path}/>
// ä¼ å‚
<link to="/path/789">xxx</Link>
this.props.history.push({pathname:`/path/${id}`});
// è·å–
this.props.match.params.id
```

#### ï¼ˆ2ï¼‰query

```js
// router
<Route path='/query' component={Query}/>
// ä¼ å‚
<Link to={{ path : '/query' , query : { id : '789' }}}>xxx</Link>

this.props.history.push({pathname:"/query",query: { id : '789' }});
// è·å–
this.props.location.query.id
```

#### ï¼ˆ3ï¼‰Hooks

```js
// è·³è½¬
let history = useHistory();
history.push("/");

// è·å–
useLocation();
useParams();
useRouteMatch();
```

### 4ã€exact å±æ€§

exact æ˜¯ Route ä¸‹çš„ä¸€æ¡å±æ€§ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œreact è·¯ç”±ä¼šåŒ¹é…æ‰€æœ‰åŒ¹é…åˆ°çš„è·¯ç”±ç»„ä»·ï¼Œexact èƒ½å¤Ÿä½¿å¾—è·¯ç”±çš„åŒ¹é…æ›´ä¸¥æ ¼ä¸€äº›ã€‚

exact çš„å€¼ä¸º bool å‹ï¼Œä¸º true æ˜¯è¡¨ç¤ºä¸¥æ ¼åŒ¹é…ï¼Œä¸º false æ—¶ä¸ºæ­£å¸¸åŒ¹é…ã€‚

å¦‚åœ¨ exact ä¸º true æ—¶ï¼Œâ€™/linkâ€™ä¸â€™/â€™æ˜¯ä¸åŒ¹é…çš„ï¼Œä½†æ˜¯åœ¨ false çš„æƒ…å†µä¸‹å®ƒä»¬åˆæ˜¯åŒ¹é…çš„ã€‚
`<Route path="/home" component={Home} exact></Route>`

## å…«ã€æ€»ç»“

å­¦å®Œç”Ÿå‘½å‘¨æœŸï¼Œå¤šç»ƒä¹  JSXï¼Œé…åˆ React Router å’Œ Redux å¤šå†™å†™ç»„ä»¶ï¼ŒåŸºæœ¬å°±èƒ½ä¸Šæ‰‹å¼€å‘äº†ã€‚æ²¡æœ‰è¿‡å¤šçš„ API éœ€è¦å­¦ä¹ ï¼Œå†™èµ·æ¥ä¹Ÿæ¯”è¾ƒè‡ªç”±ã€‚
React è™½ç„¶ç”Ÿæ€å¼ºå¤§ï¼Œé€‰ç€æ€§æ¯”è¾ƒå¤šï¼Œä½†æ˜¯è¿™æ ·äº§ç”Ÿäº†ä¸€ä¸ªé—®é¢˜ï¼š`ä»€ä¹ˆæ˜¯ React çš„æœ€ä½³å®è·µï¼Ÿ`

æœ€åï¼Œè¿˜æ˜¯æ¨èä¸€äº›å­¦ä¹ èµ„æºï¼Œå¤§å®¶ä¸€èµ·åŠªåŠ›ï¼

- [Vue è½¬ React ä¸å®Œå…¨æŒ‡åŒ—](https://juejin.cn/post/6953482028188860424) ä¹‹å‰å†™ä¸€ç¯‡æ–‡ç« ï¼Œæ€»ä½“å¯¹æ¯”äº†ä¸‹vueå’Œreact
- [React è®¾è®¡æ€æƒ³](https://github.com/react-guide/react-basic) æœ‰ä¸ªé—®é¢˜ï¼šReact ä¸ºä»€ä¹ˆä¸æä¾›ç±»ä¼¼ Vue çš„ä¸€äº› API?
- [React æŠ€æœ¯æ ˆç³»åˆ—æ•™ç¨‹](http://www.ruanyifeng.com/blog/2016/09/react-technology-stack.html) é˜®å¤§çš„ React æ•™ç¨‹ç”Ÿæ€ï¼Œç¨å¾®æœ‰ç‚¹è€
- [React å…¥é—¨å®ä¾‹æ•™ç¨‹](http://www.ruanyifeng.com/blog/2015/03/react.html) é˜®ä¸€å³°å‡ºå“å¿…å±ç²¾å“ï¼
- [æ˜é‡‘ React çƒ­é—¨](https://juejin.cn/tag/React.js?sort=hottest) æœ‰å¾ˆå¤šå¤§ä½¬çš„æ–‡ç« ï¼Œå¯ä»¥æŒ‘é€‰ç€çœ‹
- [React å¼€å‘å¿…é¡»çŸ¥é“çš„ 34 ä¸ªæŠ€å·§ã€è¿‘ 1W å­—ã€‘](https://juejin.cn/post/6844903993278201870) æŠ€å·§ç›¸å…³ï¼Œå¯ä»¥è”ç³»ç©åŸºç¡€éƒ¨åˆ†è¯•è¯•çœ‹
- [ã€React æ·±å…¥ã€‘ä» Mixin åˆ° HOC å†åˆ° Hook](https://juejin.cn/post/6844903815762673671) ä»£ç å¤ç”¨çš„æ¼”å˜è¿‡ç¨‹

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a09efd5a6cff49f6bf5526f05947307c~tplv-k3u1fbpfcp-watermark.image)

## å‚è€ƒ

- [React ä¸­æ–‡æ–‡æ¡£](https://zh-hans.reactjs.org/docs/getting-started.html)
- [Redux ä¸­æ–‡æ–‡æ¡£](http://cn.redux.js.org/)
- [React Router å®˜ç½‘](https://reactrouter.com/web/guides/quick-start) è‹±æ–‡ç‰ˆ
- [React é«˜é˜¶ç»„ä»¶(HOC)çš„å…¥é—¨ ğŸ“– åŠå®è·µ ğŸ’»](https://juejin.cn/post/6844904050236850184)
- [react-redux çš„ç®€å•ä½¿ç”¨](https://zhuanlan.zhihu.com/p/62417038)
- [react è·¯ç”±ä¼ å‚åŠå…¶åŒºåˆ«](https://segmentfault.com/a/1190000023554534)
