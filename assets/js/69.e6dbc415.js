(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{612:function(t,a,s){"use strict";s.r(a);var e=s(7),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",{attrs:{align:"center"}},[s("img",{attrs:{width:"500",src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fb56b55a6d6d477a8e18cf5dc005e3a7~tplv-k3u1fbpfcp-zoom-crop-mark:3024:3024:3024:1702.awebp?"}})]),t._v(" "),s("blockquote",[s("p",[t._v("项目中有较多图片处理场景，补齐下相关知识点 。同时准备了 40 页配套 PPT，需要的小伙伴可加 VX or 公众号获取哈")])]),t._v(" "),s("blockquote",[s("p",[t._v("在上家公司做的分享，整理下分享给大家，需要 40 页的 PPT"),s("a",{attrs:{href:"https://alexwjj.github.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("可加 V（V798595965）"),s("OutboundLink")],1),t._v("联系（有摸鱼群 🐳），or"),s("a",{attrs:{href:"https://alexwjj.github.io/img/wx-global.png",target:"_blank",rel:"noopener noreferrer"}},[t._v("公众号 点击直达"),s("OutboundLink")],1),t._v("回复【图片 PPT】即可获取，兄弟姐妹顺便帮小弟点个赞")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d8a46185ae944fc3bdef826827660396~tplv-k3u1fbpfcp-watermark.image?",alt:"20_df54b94ce591dcbcb246267d1162fc7f.gif"}})]),t._v(" "),s("h2",{attrs:{id:"一、背景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、背景"}},[t._v("#")]),t._v(" 一、背景")]),t._v(" "),s("h3",{attrs:{id:"_1-1-为什么选这个主题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-为什么选这个主题"}},[t._v("#")]),t._v(" 1.1 为什么选这个主题")]),t._v(" "),s("ul",[s("li",[t._v("项目有较多处理图片的场景，补齐下相关知识点")]),t._v(" "),s("li",[t._v("当时比较热门的几个话题，都能和图片能扯一扯关系，有点兴趣就去了解了下")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.zhihu.com/question/509997789",target:"_blank",rel:"noopener noreferrer"}},[t._v("西安电信一码通项目此前报道中提到「两天两夜把 1m 图片优化到 100kb」，图像压缩技术难度是怎样的？"),s("OutboundLink")],1),t._v(" "),s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d67f2af0b56c4b3ca17a4e27c2668d33~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("li",[t._v("西安一码通崩溃闹大后，某地区直接【物理】负载均衡")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7075a5eac6a245488d79a474c6baf452~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),s("h3",{attrs:{id:"_1-2-带着问题看"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-带着问题看"}},[t._v("#")]),t._v(" 1.2 带着问题看")]),t._v(" "),s("ul",[s("li",[t._v("GIF 都糊成马赛克了，为什么还没怎么见过高清的？")]),t._v(" "),s("li",[t._v("JPEG 和 JPG 有没有区别？什么区别？渐进式图片？")]),t._v(" "),s("li",[t._v("PNG 为什么透明？")]),t._v(" "),s("li",[t._v("什么是高斯模糊吗？")]),t._v(" "),s("li",[t._v("图片原生支持响应式的方法？")]),t._v(" "),s("li",[t._v("我们可以用"),s("code",[t._v("<img>")]),t._v("标签可以做哪些技术方案？")]),t._v(" "),s("li",[t._v(".......")])]),t._v(" "),s("h2",{attrs:{id:"二、图片类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、图片类型"}},[t._v("#")]),t._v(" 二、图片类型")]),t._v(" "),s("p",[t._v("直接开讲，说到图片类型，大家可能立刻会想到的是 jpg，png 等，这些都算是图片格式，实际上图片有两种类型:")]),t._v(" "),s("ul",[s("li",[t._v("位图")]),t._v(" "),s("li",[t._v("矢量图")])]),t._v(" "),s("h3",{attrs:{id:"_2-1-位图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-位图"}},[t._v("#")]),t._v(" 2.1 位图")]),t._v(" "),s("p",[t._v("位图（bitmap）BMP，亦称为"),s("a",{attrs:{href:"https://baike.baidu.com/item/%E7%82%B9%E9%98%B5%E5%9B%BE%E5%83%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("点阵图像"),s("OutboundLink")],1),t._v("或"),s("a",{attrs:{href:"https://baike.baidu.com/item/%E6%A0%85%E6%A0%BC%E5%9B%BE%E5%83%8F/10602114",target:"_blank",rel:"noopener noreferrer"}},[t._v("栅格图像"),s("OutboundLink")],1),t._v("，是由称作"),s("a",{attrs:{href:"https://baike.baidu.com/item/%E5%83%8F%E7%B4%A0/95084",target:"_blank",rel:"noopener noreferrer"}},[t._v("像素"),s("OutboundLink")],1),t._v("（图片元素）的单个点组成的。这些点可以进行不同的排列和染色以构成"),s("a",{attrs:{href:"https://baike.baidu.com/item/%E5%9B%BE%E6%A0%B7/63558",target:"_blank",rel:"noopener noreferrer"}},[t._v("图样"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dfa5df10dac84c2f806347b450d3cfda~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_2-2-矢量图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-矢量图"}},[t._v("#")]),t._v(" 2.2 矢量图")]),t._v(" "),s("p",[t._v("矢量图（vector），也称为"),s("a",{attrs:{href:"https://baike.baidu.com/item/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1",target:"_blank",rel:"noopener noreferrer"}},[t._v("面向对象"),s("OutboundLink")],1),t._v("的"),s("a",{attrs:{href:"https://baike.baidu.com/item/%E5%9B%BE%E5%83%8F",target:"_blank",rel:"noopener noreferrer"}},[t._v("图像"),s("OutboundLink")],1),t._v("或绘图图像，在"),s("a",{attrs:{href:"https://baike.baidu.com/item/%E6%95%B0%E5%AD%A6/107037",target:"_blank",rel:"noopener noreferrer"}},[t._v("数学"),s("OutboundLink")],1),t._v("上定义为一系列由点连接的线。矢量文件中的图形元素称为对象。每个对象都是一个自成一体的实体，它具有"),s("a",{attrs:{href:"https://baike.baidu.com/item/%E9%A2%9C%E8%89%B2/5014",target:"_blank",rel:"noopener noreferrer"}},[t._v("颜色"),s("OutboundLink")],1),t._v("、形状、"),s("a",{attrs:{href:"https://baike.baidu.com/item/%E8%BD%AE%E5%BB%93/4155218",target:"_blank",rel:"noopener noreferrer"}},[t._v("轮廓"),s("OutboundLink")],1),t._v("、大小和"),s("a",{attrs:{href:"https://baike.baidu.com/item/%E5%B1%8F%E5%B9%95/3750314",target:"_blank",rel:"noopener noreferrer"}},[t._v("屏幕"),s("OutboundLink")],1),t._v("位置等属性。")]),t._v(" "),s("p",[t._v("简单来说矢量图就像用几何图形来描述一幅图，在矢量图放大时，我们所记录的几何图形的各种角度、形状等并没有改变，所以无论是放大还是缩小，都不会影响矢量图的清晰度。对前端而言，能接触到的就是 SVG 格式了。")]),t._v(" "),s("h3",{attrs:{id:"_2-3-类型对比"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-类型对比"}},[t._v("#")]),t._v(" 2.3 类型对比")]),t._v(" "),s("ul",[s("li",[t._v("位图的放大质量较差，但是矢量图可以不降低质量地无限放大。")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9aa94f82a4014f9db2c7e6a5981c2b6d~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("矢量图")]),t._v(" "),s("th",[t._v("位图")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("色彩")]),t._v(" "),s("td",[t._v("少")]),t._v(" "),s("td",[t._v("多")])]),t._v(" "),s("tr",[s("td",[t._v("空间")]),t._v(" "),s("td",[t._v("小")]),t._v(" "),s("td",[t._v("大")])]),t._v(" "),s("tr",[s("td",[t._v("转换")]),t._v(" "),s("td",[t._v("可随意转为位图")]),t._v(" "),s("td",[t._v("转矢量图难度较大，也无法达到高质量")])]),t._v(" "),s("tr",[s("td",[t._v("使用场景")]),t._v(" "),s("td",[t._v("标识、图标、Logo 等简单直接的图像")]),t._v(" "),s("td",[t._v("网络中比较丰富的图片中")])])])]),t._v(" "),s("h2",{attrs:{id:"三、图片压缩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、图片压缩"}},[t._v("#")]),t._v(" 三、图片压缩")]),t._v(" "),s("h3",{attrs:{id:"_3-1-无压缩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-无压缩"}},[t._v("#")]),t._v(" 3.1 无压缩")]),t._v(" "),s("p",[t._v("无压缩的图片格式不对图片数据进行压缩处理，能准确地呈现原图片。例如"),s("a",{attrs:{href:"https://baike.baidu.com/item/BMP%E6%A0%BC%E5%BC%8F/3427000?fr=aladdin",target:"_blank",rel:"noopener noreferrer"}},[t._v("BMP"),s("OutboundLink")],1),t._v("格式的图片。")]),t._v(" "),s("h3",{attrs:{id:"_3-2-有损压缩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-有损压缩"}},[t._v("#")]),t._v(" 3.2 有损压缩")]),t._v(" "),s("p",[t._v("指在压缩文件大小的过程中，损失了一部分图片的信息，也即降低了图片的质量（即图片被压糊了），并且这种损失是"),s("strong",[t._v("不可逆的")]),t._v("。")]),t._v(" "),s("p",[t._v("常见的有损压缩手段是按照一定的算法将"),s("strong",[t._v("临近的像素点进行合并")]),t._v("。压缩算法不会对图片所有的数据进行编码压缩，而是在压缩的时候，去除了人眼无法识别的图片细节。因此有损压缩可以在同等图片质量的情况下大幅降低图片的体积。例如 jpg 格式的图片使用的就是有损压缩。")]),t._v(" "),s("h3",{attrs:{id:"_3-3-无损压缩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-无损压缩"}},[t._v("#")]),t._v(" 3.3 无损压缩")]),t._v(" "),s("p",[t._v("在压缩图片的过程中，图片的质量没有任何损耗。我们任何时候都可以从无损压缩过的图片中恢复出原来的信息。")]),t._v(" "),s("p",[t._v("压缩算法对图片的所有的"),s("strong",[t._v("数据进行编码压缩")]),t._v("，能在保证图片的质量的同时降低图片的体积。例如 png、gif 使用的就是无损压缩。常用的压缩图片网站："),s("a",{attrs:{href:"https://tinify.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://tinify.cn/"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_3-4-压缩插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-压缩插件"}},[t._v("#")]),t._v(" 3.4 压缩插件")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/imagemin/imagemin",target:"_blank",rel:"noopener noreferrer"}},[t._v("imagemin"),s("OutboundLink")],1),t._v(" api 简洁好用")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/fengyuanchen/compressorjs",target:"_blank",rel:"noopener noreferrer"}},[t._v("compressorjs"),s("OutboundLink")],1),t._v(" 有线上预览，感觉不错")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/think2011/localResizeIMG",target:"_blank",rel:"noopener noreferrer"}},[t._v("localResizeIMG"),s("OutboundLink")],1),t._v(" 国内小哥写的，但是停止维护了")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/tcoopman/image-webpack-loader#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("image-webpack-loader"),s("OutboundLink")],1),t._v(" webpack 图片压缩插件")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://segmentfault.com/a/1190000023486410",target:"_blank",rel:"noopener noreferrer"}},[t._v("了解 JS 压缩图片，这一篇就够了"),s("OutboundLink")],1),t._v(" 带你实现一个 js 压缩插件，写的挺好，有张图生动形象")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a0989ee2e76c4a1baa0ee882ef792bc4~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),s("p",[t._v("项目中可压缩的时机也比较多，本地开发时压缩、打包时压缩、上传 OSS 压缩、Nginx 资源压缩等等，可根据自己需求选择适合自身业务需求的。")]),t._v(" "),s("h2",{attrs:{id:"四、图片格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、图片格式"}},[t._v("#")]),t._v(" 四、图片格式")]),t._v(" "),s("h3",{attrs:{id:"_4-1-jpeg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-jpeg"}},[t._v("#")]),t._v(" 4.1 JPEG")]),t._v(" "),s("h4",{attrs:{id:"问题-1-jpeg-和-jpg-有没有区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题-1-jpeg-和-jpg-有没有区别"}},[t._v("#")]),t._v(" 问题 1：JPEG 和 JPG 有没有区别？")]),t._v(" "),s("p",[t._v("早期的 DOS、Windows 95 系统时代的“8.3 文件名命名原则”(文件名不能超过 8 个字符或 4 个汉字) ,而"),s("strong",[t._v("扩展名不能超过 3 个字符")]),t._v(",中间用小数点“.”分隔。但 JPEG 是 4 个字符组成的，无奈只能把 4 个字符变成 3 个字符，因此“"),s("strong",[t._v("JPG")]),t._v("”格式就诞生了。")]),t._v(" "),s("h4",{attrs:{id:"问题-2-为什么-jpg-占有率这么大"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题-2-为什么-jpg-占有率这么大"}},[t._v("#")]),t._v(" 问题 2：为什么 JPG 占有率这么大？")]),t._v(" "),s("p",[t._v("JPEG 文件对于绝大多数文件通常都很小。 它的压缩使用有损算法，通过牺牲人眼不太敏感的区域的质量来最小化大小。")]),t._v(" "),s("p",[t._v("JPEG 的压缩并不是对于所有图像都很管用，对于具有锐利边缘和颜色比较少的图像，JPEG 并不是非常管用。常见的例子就是包含文字的图片，另一个是徽标：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a767c14af284498a75e14d365e51ebb~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"问题-3-你知道-jpg-还分了两种格式吗"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题-3-你知道-jpg-还分了两种格式吗"}},[t._v("#")]),t._v(" 问题 3：你知道 JPG 还分了两种格式吗？")]),t._v(" "),s("p",[t._v("一种是线性加载（Baseline JPEG），一种是渐进式加载（Progressive JPEG），两者之间的视觉差异是加载图像的方式。 随着数据的到达，线性加载从上到下加载图像。 渐进式加载以非常低的质量一次打印整个图像，并且随着数据的到达，图像得到了改善。 这里是展示差异的动画：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41b28fdd199c49969f6cb0b1d7f1afa1~tplv-k3u1fbpfcp-zoom-1.image",alt:""}}),s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e4bda3d1421a4e5b995e5b8089a2a9c1~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("p",[t._v("渐进式图片一开始大小框架就定好，不会像基本式图片一样，由于尺寸未设定而造成回流——提高的渲染性能；渐进式图片也有不足，就是吃 CPU 吃内存。")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://coding.tools/cn/progressive-jpeg",target:"_blank",rel:"noopener noreferrer"}},[t._v("渐进式 JPEG 在线转换工具"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"_4-2-gif"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-gif"}},[t._v("#")]),t._v(" 4.2 GIF")]),t._v(" "),s("p",[t._v("GIF 具有无损压缩和有损压缩的混合特性。像素表示形式是无损的，但是颜色深度限制为每个像素 8 位，采用的是"),s("a",{attrs:{href:"https://baike.baidu.com/item/LZW%E7%AE%97%E6%B3%95/7293853?fr=aladdin",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lempel-Zev-Welch（LZW）压缩算法"),s("OutboundLink")],1),t._v("，最高支持 256 种颜色。这意味着文件将包含较少的颜色，但文件体积更小。 这是 24 位 PNG 和 8 位 GIF 之间的色彩表示的比较。")]),t._v(" "),s("p",[t._v("之前也看掘金一篇文章："),s("a",{attrs:{href:"https://juejin.cn/post/7065123244881215518",target:"_blank",rel:"noopener noreferrer"}},[t._v("为什么大厂前端监控都在用 GIF 做埋点？"),s("OutboundLink")],1),t._v("感兴趣的可以了解下")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bcdbad04b1984a80800277bf917c9670~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a997c8a7accb48f8897fec7ac5904cf5~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("p",[t._v("mac 预览打开会变成帧（一直下 ↓ 键，就可以动起来了）")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d867a6795a094ca5b4eac195403f6c63~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_4-3-png"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-png"}},[t._v("#")]),t._v(" 4.3 PNG")]),t._v(" "),s("h4",{attrs:{id:"问题-1-png-为什么可以透明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题-1-png-为什么可以透明"}},[t._v("#")]),t._v(" 问题 1：PNG 为什么可以透明？")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64158e4d4e094ed9aebc55371c29208b~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("p",[t._v("PNG 是一种非常流行的无损压缩格式，所有的浏览器都支持这种格式。 其设计目的是试图替代 GIF 和 TIFF 文件格式，同时增加一些 GIF 文件格式所不具备的特性。PNG 使用从"),s("a",{attrs:{href:"https://baike.baidu.com/item/LZ77%E7%BC%96%E7%A0%81/16609862?fr=aladdin",target:"_blank",rel:"noopener noreferrer"}},[t._v("LZ77"),s("OutboundLink")],1),t._v("派生的无损数据压缩算法。PNG 图片主要有三个类型，分别为 PNG 8/ PNG 24 / PNG 32。 位数越高，存储的颜色就越多(2^n)，同时占用的体积也越大")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad2c0e4dff7b49d898c37b4d9977101c~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("ul",[s("li",[t._v("在线 PS 网站："),s("a",{attrs:{href:"https://www.photopea.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.photopea.com/"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("在线图片处理工具网站："),s("a",{attrs:{href:"https://remove-white-background.imageonline.co/cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://remove-white-background.imageonline.co/cn/"),s("OutboundLink")],1)])]),t._v(" "),s("h4",{attrs:{id:"apng"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#apng"}},[t._v("#")]),t._v(" APNG")]),t._v(" "),s("p",[t._v("APNG 全称是 Animated Portable Network Graphics ， 是 PNG 格式的动画扩展，其简单说就是多张 PNG 合成的动图。可以看下下面两张对比图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f900442e2c884a86990bb9ee6a3fce36~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("p",[t._v("很明显，GIF 边缘泛白的情况很突出，APNG 就没有这样的问题。在线 demo："),s("a",{attrs:{href:"http://imbeta.cn/demo/apng/apng.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("PNG 对比 APNG 预览"),s("OutboundLink")],1),t._v("，感兴趣的也可以自己去做一个 APNG 图片："),s("a",{attrs:{href:"https://www.zhangxinxu.com/sp/apng",target:"_blank",rel:"noopener noreferrer"}},[t._v("APNG 在线合成下载工具"),s("OutboundLink")],1),t._v("。也可以看看这篇科普文"),s("a",{attrs:{href:"https://www.bilibili.com/read/cv3635507/",target:"_blank",rel:"noopener noreferrer"}},[t._v("科普（APNG） - B 站一个有趣的解释"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"mng"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mng"}},[t._v("#")]),t._v(" MNG")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e3dc68bea1c94d589ad48eb7345808ca~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"问题-2-既然-apng-相比-gif-怎么完美-为什么没人用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题-2-既然-apng-相比-gif-怎么完美-为什么没人用"}},[t._v("#")]),t._v(" 问题 2：既然 APNG 相比 GIF 怎么完美，为什么没人用？")]),t._v(" "),s("p",[t._v("动态图虽然广受欢迎，互联网对其的需求也很大，但画质不是决定性因素。看有人这样说：即便是 GIF 这样糟糕的画质，人们也是乐此不彼的去欣赏一幅 GIF 中讲述的事情，所以画质不是动图的主要关注点")]),t._v(" "),s("h4",{attrs:{id:"相关博文"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关博文"}},[t._v("#")]),t._v(" 相关博文")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.bilibili.com/read/cv3635507/",target:"_blank",rel:"noopener noreferrer"}},[t._v("【B 站】图文方式科普（APNG）"),s("OutboundLink")],1),t._v(" B 站二次元风格讲解")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6857678436304388104",target:"_blank",rel:"noopener noreferrer"}},[t._v("【掘金】Web 端 APNG 播放实现原理 - 网易云音乐"),s("OutboundLink")],1),t._v(" 能把 APNG 落地的还没见过几个。。。")])]),t._v(" "),s("h3",{attrs:{id:"_4-4-webp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-webp"}},[t._v("#")]),t._v(" 4.4 WEBP")]),t._v(" "),s("h4",{attrs:{id:"概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),s("p",[t._v("WebP 是由 Google 最初在 2010 年发布，目标是减少文件大小。它能同时支持无损压缩和有损压缩。它几乎集成了以上所有图片的优点，并且能够拥有更高的压缩率。")]),t._v(" "),s("p",[t._v("看一个统计（比较早的了）：YouTube 的视频略缩图采用 WebP 格式后，网页加载速度提升了 10%；谷歌的 Chrome 网上应用商店采用 WebP 格式图片后，每天可以节省几 TB 的带宽，页面平均加载时间大约减少 1/3；Google+ 移动应用采用 WebP 图片格式后，每天节省了 50TB 数据存储空间。")]),t._v(" "),s("p",[t._v("打开掘金、B 站等流量平台，已经在全面使用 webp 了，这点可以作为前端性能优化的一点")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d977fc3c9ebc4eca9d28bdd580831fd4~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"转换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#转换"}},[t._v("#")]),t._v(" 转换")]),t._v(" "),s("p",[t._v("通过 vue-webp-plugin 和 webp-loader 可以在打包阶段进行图片格式的转换，优化项目体积，提升用户体验。不过格式的转换一般用在 CDN 平台，在一个图片管理平台，生成不同场景下需要的不同格式。如果公司还没有，搭建一个这样的平台，又是一个可搞的小基建 🤠")]),t._v(" "),s("h4",{attrs:{id:"兼容性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#兼容性"}},[t._v("#")]),t._v(" 兼容性")]),t._v(" "),s("p",[t._v("都 2022 年了，兄弟们，放自己一马")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c8dfbaa11ca3492b9e8f865a81adf59e~tplv-k3u1fbpfcp-watermark.image?",alt:"tempImage1656926296065.gif"}})]),t._v(" "),s("h3",{attrs:{id:"_4-4-svg"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-svg"}},[t._v("#")]),t._v(" 4.4 SVG")]),t._v(" "),s("p",[t._v("SVG 格式比较特殊，与其他格式有很大不同。 SVG 图像存储的是几何形状，而不是每个像素的值。 它的主要优势是可以无限放大而不会造成质量损失，具体可以看下图的对比：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7f0012bbc905403da5b7834a52689091~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("p",[t._v("SVG 文件类型主要用于徽标，但也用于几何形状的图像。 这种文件的主要缺点是：")]),t._v(" "),s("p",[t._v("对于徽标等小图片，文件大小通常比 PNG 或 WebP 大，尤其对于形状复杂，不规则的 logo。在大多数情况下，无法将图片有效地转换为 SVG(有一些工具说可以做到这一点，但效果并不理想)。")]),t._v(" "),s("p",[t._v("不论视图大小如何，SVG 文件的图像质量都很高。 所有现代浏览器都支持它。")]),t._v(" "),s("h3",{attrs:{id:"_4-5-其他格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-其他格式"}},[t._v("#")]),t._v(" 4.5 其他格式")]),t._v(" "),s("p",[t._v("其他的格式在图像质量和文件大小方面都更好(BPG, JPEG 2000, JPEG XR)，但因为某些格式受专利保护，无法在网络上广泛使用。")]),t._v(" "),s("ul",[s("li",[t._v("AVIF："),s("a",{attrs:{href:"https://blog.projectoms.com/pages/454.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("下一代图片压缩格式–AVIF 来了！"),s("OutboundLink")],1),t._v(" 基于一种名为 AV1 的视频压缩技术的图片格式，还没见过谁在用。。。")]),t._v(" "),s("li",[t._v("各种格式的对比：")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4b9e7804bf974d2dbcd680f4b43f99de~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"五、img-标签的应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、img-标签的应用"}},[t._v("#")]),t._v(" 五、img 标签的应用")]),t._v(" "),s("h3",{attrs:{id:"_5-1-img-属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-img-属性"}},[t._v("#")]),t._v(" 5.1 img 属性")]),t._v(" "),s("ul",[s("li",[t._v("src 注意在 vue 和 react 中的路径问题")]),t._v(" "),s("li",[t._v("alt 在图片不能正常显示时出现的文本提示")]),t._v(" "),s("li",[t._v("title 在鼠标在移动到元素上的文本提示")]),t._v(" "),s("li",[t._v("width、height、border 提前设置好标签宽高，可以减少重绘次数，如果 html 标签都支持这种写法就舒服了")]),t._v(" "),s("li",[t._v("loading 懒加载，srcset 响应式，都是实验性属性，不大好用的感觉")]),t._v(" "),s("li",[t._v("onload、onerror")])]),t._v(" "),s("h3",{attrs:{id:"_5-2-发起跨域请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-发起跨域请求"}},[t._v("#")]),t._v(" 5.2 发起跨域请求")]),t._v(" "),s("ul",[s("li",[t._v("crossorigin\n"),s("ul",[s("li",[t._v("img 的这个属性可以控制是否支持 cors 来获取图像资源，该属性支持两个值：anonymous 和 use-credentials")])])]),t._v(" "),s("li",[t._v("anonymous\n"),s("ul",[s("li",[t._v("执行一个跨域请求获取资源，但不可以携带 cookie、证书或者 HTTP 基本验证信息")])])]),t._v(" "),s("li",[t._v("use-credentials - 跨域请求获取资源，可以携带 cookie、证书或者 HTTP 基本验证信息\n利用这些属性，我们可以用 img 做一些环境嗅探相关技术方案（比如曝光埋点），只能发送 get 请求，拿不到响应，一般只需求在 onload 和 onerror 监听请求是否成功即可")])]),t._v(" "),s("h3",{attrs:{id:"_5-3-相关-css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-相关-css"}},[t._v("#")]),t._v(" 5.3 相关 css")]),t._v(" "),s("h4",{attrs:{id:"background"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#background"}},[t._v("#")]),t._v(" background")]),t._v(" "),s("p",[t._v("相信大哥们都懂这个，就简单列举下属性")]),t._v(" "),s("ul",[s("li",[t._v("background-color")]),t._v(" "),s("li",[t._v("background-image")]),t._v(" "),s("li",[t._v("background-repeat")]),t._v(" "),s("li",[t._v("background-attachment")]),t._v(" "),s("li",[t._v("background-position")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("div "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("background"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("#ffffff "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'img_tree.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" no"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("repeat right top"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h4",{attrs:{id:"background-size"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#background-size"}},[t._v("#")]),t._v(" background-size")]),t._v(" "),s("ul",[s("li",[t._v("设置背景图片拉伸效果")]),t._v(" "),s("li",[t._v("cover： 缩放背景图片以"),s("code",[t._v("完全覆盖背景区")]),t._v("，可能背景图片部分看不见")]),t._v(" "),s("li",[t._v("contain：缩放背景图片以"),s("code",[t._v("完全填充背景区")]),t._v("，可能背景区部分空白")]),t._v(" "),s("li",[t._v("单个具体数值，eg：background-size: 50% 设置图片的宽度")]),t._v(" "),s("li",[t._v("两个具体数值，eg：background-size: 50% auto 设置图片的宽高")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33588344bfe54bd6847f2206448de1e8~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),s("h4",{attrs:{id:"object-fit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-fit"}},[t._v("#")]),t._v(" object-fit")]),t._v(" "),s("ul",[s("li",[t._v("指定元素的内容应该如何去适应指定容器的高度与宽度，对图片进行剪切，保留原始比例。挺有用的，学到就是赚到。")]),t._v(" "),s("li",[t._v("和 background-size 区别，可用于 img, video 等的标签，background-size 只能用于背景图")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://codepen.io/alexwjj/pen/MWVayMY",target:"_blank",rel:"noopener noreferrer"}},[t._v("object-fit & object-position 在线体验 demo"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0c8f5cdbb2746709c22cc72c3c816af~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),s("h4",{attrs:{id:"filter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filter"}},[t._v("#")]),t._v(" filter")]),t._v(" "),s("ul",[s("li",[t._v("css3 的 filter 真的是无敌")]),t._v(" "),s("li",[t._v("可以实现图片模糊、高亮、调色、阴影等各类效果，像手机中的各类滤镜都可以用用这个来搞一搞")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/filter",target:"_blank",rel:"noopener noreferrer"}},[t._v("CSS filter demo"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("img "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grayscale")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 黑白")]),t._v("\n    filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("blur")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模糊")]),t._v("\n    filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("brightness")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 高亮")]),t._v("\n    filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("contrast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对比度")]),t._v("\n    filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" drop"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shadow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("px "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("px "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("px red"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 阴影")]),t._v("\n    filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" hue"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rotate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("90")]),t._v("deg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 色相旋转")]),t._v("\n    filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("invert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 反转输入图像")]),t._v("\n    filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("opacity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 透明度")]),t._v("\n    filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("saturate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("800")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 饱和度")]),t._v("\n    filter"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("contrast")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("brightness")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("150")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用多个滤镜，每个滤镜使用空格分隔")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("h2",{attrs:{id:"六、性能-体验优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#六、性能-体验优化"}},[t._v("#")]),t._v(" 六、性能&体验优化")]),t._v(" "),s("h3",{attrs:{id:"_6-1-懒加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-懒加载"}},[t._v("#")]),t._v(" 6.1 懒加载")]),t._v(" "),s("h4",{attrs:{id:"监听可视区域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监听可视区域"}},[t._v("#")]),t._v(" 监听可视区域")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听页面滚动")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在一开始加载的时候")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("img data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://xx.com/xx.png"')]),t._v(" src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在进入可视范围内时")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("img data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://xx.com/xx.png"')]),t._v(" src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://xx.com/xx.png"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可视区域的高度")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" viewHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//元素距离可视区域顶部的高度")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" distance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" viewHeight "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" imgs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBoundingClientRect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("top"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可根据设置距离顶部多少时开始图片加载")]),t._v("\nElement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBoundingClientRect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 方法返回元素的大小及其相对于视口的位置。\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h4",{attrs:{id:"img-元素loading-属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#img-元素loading-属性"}},[t._v("#")]),t._v(" img 元素"),s("strong",[t._v("Loading")]),t._v(" 属性")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.zhangxinxu.com/study/201909/img-lazy-loading-demo.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("图片原生懒加载 lazy loading 演示 - 张鑫旭"),s("OutboundLink")],1),t._v(" 不知道为啥不生效？")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("img src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image.jpg"')]),t._v(" alt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v(" loading"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lazy"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("iframe src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"video-player.html"')]),t._v(" title"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),t._v(" loading"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lazy"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("iframe"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h4",{attrs:{id:"基于-intersectionobserver-交叉-api-实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基于-intersectionobserver-交叉-api-实现"}},[t._v("#")]),t._v(" 基于 IntersectionObserver 交叉 API 实现")]),t._v(" "),s("p",[t._v("Intersection Observer API 提供了一种异步检测目标元素与祖先元素或 "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Glossary/Viewport",target:"_blank",rel:"noopener noreferrer"}},[t._v("viewport"),s("OutboundLink")],1),t._v(" 相交情况变化的方法。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/77e07990a5c045a7a1f97f8fc2b35f47~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("p",[t._v("懒加载基础实现")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" images "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelectorAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".lazyload"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" observer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entries")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    entries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isIntersecting"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开始加载图片,把data-src的值放到src")]),t._v("\n        observer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unobserve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 停止监听已开始加载的图片")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rootMargin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0px 0px -100px 0px"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 交叉过视图的100，才开始派发事件")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nimages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" observer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("h3",{attrs:{id:"_6-2-高斯模糊"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-高斯模糊"}},[t._v("#")]),t._v(" 6.2 高斯模糊")]),t._v(" "),s("p",[s("strong",[t._v("高斯模糊")]),t._v("（英语：Gaussian Blur），也叫高斯平滑，是在"),s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/Adobe_Photoshop",target:"_blank",rel:"noopener noreferrer"}},[t._v("Adobe Photoshop"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/GIMP",target:"_blank",rel:"noopener noreferrer"}},[t._v("GIMP"),s("OutboundLink")],1),t._v("以及"),s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/Paint.NET",target:"_blank",rel:"noopener noreferrer"}},[t._v("Paint.NET"),s("OutboundLink")],1),t._v("等图像处理软件中广泛使用的处理效果，通常用它来减少图像噪声以及降低细节层次。这种模糊技术生成的图像，其视觉效果就像是经过一个半透明屏幕在观察图像，这与镜头焦外成像效果"),s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E6%95%A3%E6%99%AF",target:"_blank",rel:"noopener noreferrer"}},[t._v("散景"),s("OutboundLink")],1),t._v("以及普通照明阴影中的效果都明显不同。高斯平滑也用于"),s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89",target:"_blank",rel:"noopener noreferrer"}},[t._v("计算机视觉"),s("OutboundLink")],1),t._v("算法中的预先处理阶段，以增强图像在不同比例大小下的图像效果（参见"),s("a",{attrs:{href:"https://zh.wikipedia.org/w/index.php?title=%E5%B0%BA%E5%BA%A6%E7%A9%BA%E9%97%B4&action=edit&redlink=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("尺度空间"),s("OutboundLink")],1),t._v("表示以及"),s("a",{attrs:{href:"https://zh.wikipedia.org/w/index.php?title=%E5%B0%BA%E5%BA%A6%E7%A9%BA%E9%97%B4&action=edit&redlink=1",target:"_blank",rel:"noopener noreferrer"}},[t._v("尺度空间"),s("OutboundLink")],1),t._v("实现）。 从数学的角度来看，图像的高斯模糊过程就是图像与"),s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E6%AD%A3%E6%80%81%E5%88%86%E5%B8%83",target:"_blank",rel:"noopener noreferrer"}},[t._v("正态分布"),s("OutboundLink")],1),t._v("做卷积。由于正态分布又叫作“高斯分布”，所以这项技术就叫作高斯模糊。")]),t._v(" "),s("h4",{attrs:{id:"原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),s("ol",[s("li",[t._v("渲染一个容器，保持与原图的比例和尺寸相同，填充一个较浅的背景色；")]),t._v(" "),s("li",[t._v("先加载小图，同时使用模糊效果；")]),t._v(" "),s("li",[t._v("小图加载完成，开始请求大图；")]),t._v(" "),s("li",[t._v("大图加载完成，显示大图，隐藏小图。")])]),t._v(" "),s("h4",{attrs:{id:"效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#效果"}},[t._v("#")]),t._v(" 效果")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://ccforward.github.io/progressive-image/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击预览 progressive image demo For Vanilla JS"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/36bc81d54f354f73975911febc255c38~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),s("h3",{attrs:{id:"_6-3-小图片转-base64"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-小图片转-base64"}},[t._v("#")]),t._v(" 6.3 小图片转 base64")]),t._v(" "),s("p",[t._v("提升性能: 网页上的每一个图片，都是需要消耗一个 http 请求下载而来的, 图片的下载始终都要向服务器发出请求，要是图片的下载不用向服务器发出请求，base64 可以随着 HTML 的下载同时下载到本地，减少 https 请求。")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将项目中小于 10kb 的图片转化为 base64 应用到页面中")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  module"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  rules"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token regex"}},[s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.(png|jpe?g|gif|svg)(\\?.*)?$")]),s("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      loader"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url-loader'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      limit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" utils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("assetsPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'img/[name].[hash:7].[ext]'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("h3",{attrs:{id:"_6-4-响应式图片加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-响应式图片加载"}},[t._v("#")]),t._v(" 6.4 响应式图片加载")]),t._v(" "),s("p",[t._v("在不同分辨率的设备上显示不同尺寸的图片，避免资源的浪费。常用的方法就是 css3 的媒体查询")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("@media screen "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("min"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1200")]),t._v("px")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    img "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      background"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("image"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n@media screen "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("min"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("992")]),t._v("px")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n@media screen "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("min"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("768")]),t._v("px")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n@media screen "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("and")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("min"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("width"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("480")]),t._v("px")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("p",[t._v("还可以使用 HTML5 的 picture 标签进行响应式处理，现在也有一些呼声说可以用 picture 代替 img，目前看 picture 除了不支持 IE，其它支持的都挺好，有相关需求的兄弟们可以用起来了")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("picture"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("source srcset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/img/l.png"')]),t._v(" media"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(min-width: 1200px)"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("source srcset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/img/2.png"')]),t._v(" media"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(min-width: 992px)"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("source srcset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/img/4.png"')]),t._v(" media"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(min-width: 768px)"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("img src"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/img/4.png"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("picture"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"_6-5-骨架屏"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-骨架屏"}},[t._v("#")]),t._v(" 6.5 骨架屏")]),t._v(" "),s("p",[t._v("用 css 提前占好位置，当资源加载完成即可填充，减少页面的回流与重绘，同时还能给用户最直接的反馈。 推荐插件："),s("a",{attrs:{href:"https://link.juejin.cn/?target=https://github.com/buildo/react-placeholder",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-placeholder"),s("OutboundLink")],1),t._v("，当然市面上挺多的优秀的插件，这里就不一一说了~~~")]),t._v(" "),s("h3",{attrs:{id:"_6-6-图片生成服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-6-图片生成服务"}},[t._v("#")]),t._v(" 6.6 图片生成服务")]),t._v(" "),s("p",[t._v("有赞微商城包括了 PC 端、H5 端和小程序端，每个端都有绘制分享海报的需求。最早的时候是在每个端通过 canvas API 来绘制的，通过 canvas 绘制有很多痛点，于是乎就有了海报生成服务的出现，简单对比下两种实现：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a4cf6adb5a142cb9586d5e07859de6b~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"海报服务流程图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#海报服务流程图"}},[t._v("#")]),t._v(" 海报服务流程图")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/256851f8d06a4a72887ec196af702d54~tplv-k3u1fbpfcp-zoom-1.image",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"服务优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务优化"}},[t._v("#")]),t._v(" 服务优化")]),t._v(" "),s("ul",[s("li",[t._v("优化 Chromium 启动项，启动一个最小化可用的浏览器实例，其他不需要的功能都禁用掉，这样会大大提升启动速度")]),t._v(" "),s("li",[t._v("每次绘制采用新开标签页的行为，而不是新开一个实例")]),t._v(" "),s("li",[t._v("Chromium 定时刷新机制")]),t._v(" "),s("li",[t._v("Redis 缓存，避免重复绘制")])]),t._v(" "),s("h3",{attrs:{id:"_6-7-其它优化点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-7-其它优化点"}},[t._v("#")]),t._v(" 6.7 其它优化点")]),t._v(" "),s("ul",[s("li",[t._v("图片预加载：利用浏览器空闲时间，做后台请求图片资源，借助 preload，prefetch 提高图片加载层级，实现预加载")]),t._v(" "),s("li",[t._v("使用 css 代替某些图片，比如实现修饰效果，如半透明、边框、圆角、阴影、渐变等，在当前主流浏览器中都可以用 CSS 达成，这样能减少图片的请求，达到优化的目的。")]),t._v(" "),s("li",[t._v("使用 iconfont")]),t._v(" "),s("li",[t._v("升级 Http2.0（长连接，多路复用，首部压缩，服务端推送等）")]),t._v(" "),s("li",[t._v("等等")])]),t._v(" "),s("h2",{attrs:{id:"七、参考-ppt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#七、参考-ppt"}},[t._v("#")]),t._v(" 七、参考 & PPT")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.runoob.com/w3cnote/web-image-optimization.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web 性能优化：图片优化"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://tie.pub/2020/04/image-techniques/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web 上的图片技巧"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://jayzangwill.github.io/blog/2020/04/07/img-knowledge/",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端该如何选择图片的格式"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("需要 PPT 可加 V 联系（有摸鱼群 🐳），or"),s("a",{attrs:{href:"https://alexwjj.github.io/img/wx-global.png",target:"_blank",rel:"noopener noreferrer"}},[t._v("公众号 点击直达"),s("OutboundLink")],1),t._v("回复【图片 PPT】即可获取")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c86468b892a140fc998951f5cb760304~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d4812a02713943cc97b2f93e00801661~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}})]),t._v(" "),s("h2",{attrs:{id:"八、往期回顾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#八、往期回顾"}},[t._v("#")]),t._v(" 八、往期回顾")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://juejin.cn/post/7098173433548111885",target:"_blank",rel:"noopener noreferrer"}},[t._v("【逃离一线】被裁后的面经与感慨"),s("OutboundLink")],1),t._v(" 350+ 👍🏿")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6985030118758416391",target:"_blank",rel:"noopener noreferrer"}},[t._v("一篇搞定【web 打印】知识点"),s("OutboundLink")],1),t._v(" 90+ 👍🏿")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/editor/drafts/6979800157164404767",target:"_blank",rel:"noopener noreferrer"}},[t._v("一篇够用的 TypeScript 总结"),s("OutboundLink")],1),t._v(" 800+ 👍🏿")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6960556335092269063",target:"_blank",rel:"noopener noreferrer"}},[t._v("一名 vueCoder 总结的 React 基础"),s("OutboundLink")],1),t._v(" 240+ 👍🏿")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6953482028188860424",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue 转 React 不完全指北"),s("OutboundLink")],1),t._v(" 900+ 👍🏿")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6942988170208215076",target:"_blank",rel:"noopener noreferrer"}},[t._v("跳槽人速来，面经&资源分享"),s("OutboundLink")],1),t._v(" 1300+ 👍🏿")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6940058373534515237",target:"_blank",rel:"noopener noreferrer"}},[t._v("一年半前端人的求职路"),s("OutboundLink")],1),t._v(" 350+ 👍🏿")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6921911974611664903",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue2.x 高阶问题，你能答多少"),s("OutboundLink")],1),t._v(" 500+ 👍🏿")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6921911974611664903",target:"_blank",rel:"noopener noreferrer"}},[t._v("聊一聊前端性能优化"),s("OutboundLink")],1),t._v(" 1700+ 👍🏿")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://juejin.cn/post/6907500437134376974",target:"_blank",rel:"noopener noreferrer"}},[t._v("Egg + Puppeteer 实现 Html 转 PDF(已开源)"),s("OutboundLink")],1),t._v(" 70+ 👍🏿")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9a5788cc8d694af3beac8fd0a885b02e~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png"}}),t._v("\n我正在参与掘金技术社区创作者签约计划招募活动，"),s("a",{attrs:{href:"https://juejin.cn/post/7112770927082864653",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击链接报名投稿"),s("OutboundLink")],1),t._v("。")])])}),[],!1,null,null,null);a.default=r.exports}}]);